(this.webpackJsonpcars=this.webpackJsonpcars||[]).push([[0],{239:function(e,t,c){},240:function(e,t,c){},428:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c.n(r),n=c(43),s=c.n(n),o=(c(239),c(1)),i=(c.p,c(240),c(57)),l=c(35),j=c(101),b=c(6),u=c(23),d=c(437),O=c(430),h=c(431),m=c(440),x=c(438),p=c(442),f=c(2);var g=function(e){var t=a.a.useState(),c=Object(b.a)(t,2),r=c[0],n=c[1];a.a.useEffect((function(){try{var e=JSON.parse(localStorage.getItem("user"));n(e)}catch(t){}}),[]),console.log(r);var s=Object(f.jsxs)(d.a,{children:[Object(f.jsx)(d.a.Item,{children:Object(f.jsx)("a",{href:"/",children:"Home "})}),r?Object(f.jsx)(d.a.Item,{onClick:function(){localStorage.removeItem("user"),window.location.href="/login"},children:Object(f.jsx)("li",{children:"Logout"})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a.Item,{children:Object(f.jsx)("a",{href:"/login",children:" Login"})}),Object(f.jsx)(d.a.Item,{children:Object(f.jsx)("a",{href:"/register",children:" Register"})})]}),"admin"===(null===r||void 0===r?void 0:r.role)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a.Item,{children:Object(f.jsx)("a",{href:"/admin",children:" Bookings "})}),Object(f.jsx)(d.a.Item,{children:Object(f.jsx)("a",{href:"userbookings",children:" Admin"})})]}):null]});return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"header bs1",children:Object(f.jsxs)(O.a,{gutter:16,justify:"center",align:"center",children:[Object(f.jsx)(h.a,{lg:18,sm:20,children:Object(f.jsx)("div",{className:"d-flex justify-content-between",children:Object(f.jsxs)("h1",{children:[Object(f.jsx)("b",{children:Object(f.jsx)(i.b,{to:"/",style:{color:"oranged"},children:"My Cars"})})," "]})})}),Object(f.jsx)(h.a,{lg:2,sm:4,children:Object(f.jsx)(m.a,{overlay:s,placement:"bottomCenter",children:Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[!!r&&Object(f.jsx)("h5",{children:r.username}),Object(f.jsx)(x.a,{size:"large",icon:Object(f.jsx)(p.a,{})})]})})})]})}),Object(f.jsx)("div",{className:"content",children:e.children})]})},y=c(19),v=c.n(y),N=c(41),k=c(228),A=c(62),w=c.n(A),I=function(){return function(){var e=Object(N.a)(v.a.mark((function e(t){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.get("".concat("https://mycarst-backend.herokuapp.com","/api/cars/getallcars"));case 4:c=e.sent,t({type:"GET_ALL_CARS",payload:c.data}),t({type:"LOADING",payload:!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:"LOADING",payload:!0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},L=c(434),S=c(432);var D=function(){return Object(f.jsx)("div",{className:"spinner",children:Object(f.jsx)(S.a,{size:"large"})})},R=c(33),T=c.n(R),C=L.a.RangePicker;var G=function(){var e=Object(u.c)((function(e){return e.carsReducer})).cars,t=Object(u.c)((function(e){return e.alertsReducer})).loading,c=Object(r.useState)([]),a=Object(b.a)(c,2),n=a[0],s=a[1],o=Object(u.b)();return Object(r.useEffect)((function(){o(I())}),[]),Object(r.useEffect)((function(){s(e)}),[e]),Object(f.jsxs)(g,{children:[Object(f.jsx)(O.a,{className:"mt3",justify:"center",children:Object(f.jsx)(h.a,{lg:20,sm:24,className:"d-flex justify-content-left",children:Object(f.jsx)(C,{onChange:function(t){var c,r=T()(t[0],"MM DD YYYYY  HH:mm"),a=T()(t[1],"MM DD YYYYY  HH:mm "),n=[],o=Object(j.a)(e);try{for(o.s();!(c=o.n()).done;){var i=c.value;if(0==i.bookedTimeSlots.length)n.push(i);else{var l,b=Object(j.a)(i.bookedTimeSlots);try{for(b.s();!(l=b.n()).done;){var u=l.value;r.isBetween(u.From,u.to)||a.isBetween(u.from,u.to)||T()(u.from).isBetween(r,a)||T()(u.from).isBetween(r,a)||n.push(i)}}catch(d){b.e(d)}finally{b.f()}}}}catch(d){o.e(d)}finally{o.f()}console.log(n),s(n)}})})}),t&&Object(f.jsx)(D,{}),Object(f.jsx)(O.a,{justify:"center",gutter:16,className:"mt5",children:Array.isArray(n)&&n.map((function(e,t){return console.log("car: ",e),Object(f.jsx)(h.a,{lg:5,sm:24,xs:24,children:Object(f.jsxs)("div",{className:"car p-2 bs1 my-3",children:[Object(f.jsx)("img",{src:e.image,className:"carimg"}),Object(f.jsxs)("div",{className:"car-content d-flex align-items-center justify-content-between",children:[Object(f.jsxs)("div",{className:"text left pl-2",children:[Object(f.jsx)("p",{children:e.Name}),Object(f.jsxs)("p",{children:[" Rent Per Hour",e.rentPerHour,"/- "]})]}),Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(f.jsx)("button",{className:"btn1 mr-2",children:Object(f.jsx)(i.b,{to:"/booking/".concat(e._id),children:"submit"})})})]})]})},t)}))})]})},H=c(435),_=c(436),M=c(139),Y=c.n(M);c(190);Y.a.init();var E=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.alertsReducer}));return console.log(t),Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)(O.a,{gutter:16,className:"d-flex align-items-center",children:[Object(f.jsxs)(h.a,{lg:16,style:{position:"relative"},children:[Object(f.jsx)("img",{"data-aos":"slide-right","data-aos-duration":"1400",src:"https://images.unsplash.com/photo-1577152685445-ca48bed1b0c6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80 "}),Object(f.jsx)("h1",{className:"login-logo",children:"MyCars"})]}),Object(f.jsx)(h.a,{lg:8,className:"text-left",children:Object(f.jsxs)(H.a,{layout:"vertical",className:"login-from-p-5",onFinish:function(t){var c;e((c=t,function(){var e=Object(N.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),console.log("redux userLogin: ",c),e.prev=2,e.next=5,w.a.post("".concat("https://mycarst-backend.herokuapp.com","/api/users/login"),c);case 5:r=e.sent,localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(r.data)),k.b.success("Login Success"),t({type:"GET_ALL_CARS",payload:r.data}),t({type:"LOADING",payload:!1}),k.b.success("Registration successfull"),setTimeout((function(){window.location.href="/"}),500),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),k.b.error("something wrong"),t({type:"LOADING",payload:!1});case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}())),console.log(t)},children:[Object(f.jsx)("h1",{children:"Login"}),Object(f.jsx)("hr",{}),Object(f.jsx)(H.a.Item,{name:"username",label:"Username",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"password",label:"Password",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)("button",{claasName:"btn1 mt-2 mb-2",children:" Login"}),Object(f.jsx)("hr",{}),Object(f.jsx)(i.b,{to:"/register",children:"Click Here to Register"})]})})]})})};Y.a.init();var P=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.alertsReducer})).loading;return Object(f.jsxs)("div",{className:"login",children:[t&&Object(f.jsx)(D,{}),Object(f.jsxs)(O.a,{gutter:16,className:"d-flex align-items-center",children:[Object(f.jsxs)(h.a,{lg:16,style:{position:"relative"},children:[Object(f.jsx)("img",{data:!0,aos:"slide-left","data-aos-duration":"1400",src:"https://images.unsplash.com/photo-1577152685445-ca48bed1b0c6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80 "}),Object(f.jsx)("h1",{className:"login-logo",children:"MyCars"})]}),Object(f.jsx)(h.a,{lg:8,className:"text-left p-5",children:Object(f.jsxs)(H.a,{layout:"vertical",className:"login-form-p-5",onFinish:function(t){var c;e((c=t,function(){var e=Object(N.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),console.log("register: ",c),e.prev=2,e.next=5,w.a.post("".concat("https://mycarst-backend.herokuapp.com","/api/users/register"),c);case 5:r=e.sent,console.log("register  success: ",r),k.b.success("Registration successfull"),setTimeout((function(){window.location.href="/login"}),500),t({type:"LOADING",payload:!1}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),k.b.error("Something went wrong"),t({type:"LOADING",payload:!1});case 17:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(f.jsx)("h1",{children:"Register"}),Object(f.jsx)("hr",{}),Object(f.jsx)(H.a.Item,{name:"username",label:"Username",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"password",label:"Password",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"cpassword",label:"Confirm Password",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)("button",{claasName:"btn1 mt-2 mb-3",children:" Register"}),Object(f.jsx)("br",{}),Object(f.jsx)(i.b,{to:"/login",children:"Click Here to Login"})]})})]})]})},q=c(433),B=c(439),F=c(114),z=c(223),J=c.n(z),K=c(222),V=c.n(K),W=L.a.RangePicker;var U=function(e){e.match;var t=Object(u.c)((function(e){return e.carsReducer})).cars,c=Object(u.c)((function(e){return e.alertsReducer})).loading,a=Object(r.useState)({}),n=Object(b.a)(a,2),s=n[0],o=n[1],i=Object(u.b)(),j=Object(l.g)().carid,d=Object(r.useState)(),m=Object(b.a)(d,2),x=m[0],p=m[1],y=Object(r.useState)(),A=Object(b.a)(y,2),L=A[0],S=A[1],R=Object(r.useState)(0),C=Object(b.a)(R,2),G=C[0],H=C[1],_=Object(r.useState)(!1),M=Object(b.a)(_,2),Y=M[0],E=M[1],P=Object(r.useState)(0),z=Object(b.a)(P,2),K=z[0],U=z[1],Z=Object(r.useState)(!1),Q=Object(b.a)(Z,2),X=Q[0],$=Q[1];return Object(r.useEffect)((function(){Array.isArray(t)&&0===t.length&&i(I())}),[]),Object(r.useEffect)((function(){if(j||0!==t.length){var e=t.find((function(e){return e._id===j}));console.log("carObj",e),e&&o(e)}}),[t,j]),Object(r.useEffect)((function(){0!==Object.keys(s).length&&(U(G*parseInt(s.rentPerHour)),Y&&U(K+30*G))}),[Y,G,s]),Object(f.jsxs)(g,{children:[(c||!s)&&Object(f.jsx)(D,{}),Object(f.jsxs)(O.a,{justify:"center",className:" d-flex align-items-center",style:{minHeight:"90vh"},children:[Object(f.jsx)(h.a,{lg:10,sm:24,xs:24,children:Object(f.jsx)("img",{src:null===s||void 0===s?void 0:s.image,className:"carimg 2 bs1"})}),Object(f.jsxs)(h.a,{lg:10,sm:24,xs:24,className:"text-right",children:[Object(f.jsxs)(q.a,{type:"horizontal",dashed:!0,children:[" ","car info"," "]}),Object(f.jsxs)("div",{style:{textAlign:"right"},children:[Object(f.jsx)("p",{children:null===s||void 0===s?void 0:s.name}),Object(f.jsxs)("p",{children:[null===s||void 0===s?void 0:s.rentPerHour,"Rent Per Hour/-"]}),Object(f.jsxs)("p",{children:["Fuel Type: ",null===s||void 0===s?void 0:s.fuelType]}),Object(f.jsxs)("p",{children:["Max Persons: ",null===s||void 0===s?void 0:s.capacity]})]}),Object(f.jsx)(q.a,{type:"horizontal",dashed:!0,children:"Select Time Slots"}),Object(f.jsx)(W,{ShowTime:{format:"HH:mm"},format:"MM DD YYYY HH:mm",onChange:function(e){p(T()(e[0]).format("MMM DD YYYY HH::mm")),S(T()(e[1]).format("MMM DD YYYY HH::mm")),H(e[1].diff(e[0],"hours"))}}),Object(f.jsx)("br",{}),Object(f.jsxs)("button",{className:"btn1 mt-2",onClick:function(){$(!0)},children:[" ","See Booked Slots"]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Total Hours:",Object(f.jsx)("b",{children:G})]}),Object(f.jsxs)("p",{children:["Rent Per Hour:",Object(f.jsx)("b",{children:null===s||void 0===s?void 0:s.rentPerHour})]}),Object(f.jsx)(B.a,{onChange:function(e){e.target.checked?E(!0):E(!1)},children:"Driver Required"}),Object(f.jsxs)("h3",{children:["Total Amount :",K]}),Object(f.jsx)(V.a,{shippingAddress:!0,token:function(e){var t={token:e,user:JSON.parse(localStorage.getItem("user"))._id,car:s._id,totalHours:G,totalAmount:K,driverRequire:Y,bookedTimeSlots:{from:x,to:L}};i(function(e){return function(){var t=Object(N.a)(v.a.mark((function t(c){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"LOADING",payload:!0}),t.next=3,w.a.post("".concat("https://mycarst-backend.herokuapp.com","/api/bookings/bookCar"),e).then((function(e){k.b.success("Success");var t=e.data.payment,r=e.data.newbooking;c({type:"LOADING",payload:!1}),Object(F.b)("user_M0Asa0AoFIZHa6aUuPFQm");var a={start_date:r.bookedTimeSlots.from,from_email:"taher.chabaane.1@gmailcom",from_name:"My Car Company",end_date:r.bookedTimeSlots.to,total_amount:r.totalAmount,user_email:t.receipt_email};F.a.send("service_col3qlh","template_m3mrs6r",a).then((function(){k.b.success("Send")})).catch((function(e){k.b.error("something went wrong,please try later")}))})).catch((function(e){console.log(e),c({type:"LOADING",payload:!0}),k.b.error("something went wrong,please try later")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},currency:"eur",amount:100*K,stripeKey:"pk_test_51KC2YVHMZjcwCZXiokXzAOGeyq9r11rbhOwFHIbwRM7Lk486cgfW8GKee5EBAwjz3NzOg45PNkQ9uLpI0OdI6vrn00csAdOc3x",children:Object(f.jsx)("button",{classeName:"btn1",children:"Book Now"})})]})]}),s.name&&Object(f.jsxs)(J.a,{visible:X,closable:!1,foorter:!1,title:"Booked time slots",children:[t.length&&Object(f.jsx)("div",{className:"p-2",children:s.bookedTimeSlots.map((function(e,t){return Object(f.jsxs)("button",{className:"btn1 mt-2",children:[e.from,"-",e.to]},t)}))}),Object(f.jsx)("div",{className:"text-right mt-5",children:Object(f.jsx)("button",{className:"btn1",onClick:function(){$(!1)},children:"CLOSE"})})]}),c]})]})};c(427);var Z=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.bookingsReducer})).bookings,c=Object(u.c)((function(e){return e.alertsReducer})).loading,a=JSON.parse(localStorage.getItem("user"));return Object(r.useEffect)((function(){e(function(){var e=Object(N.a)(v.a.mark((function e(t){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.get("".concat("https://mycarst-backend.herokuapp.com","/api/bookings/getAllBookings"));case 4:c=e.sent,t({type:"GET_ALL_BOOKINGS",payload:c.data}),t({type:"LOADING",payload:!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:"LOADING",payload:!0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(f.jsxs)(g,{children:[c&&Object(f.jsx)(D,{}),Object(f.jsx)("h3",{className:"text-center mt-2",children:"My Booking"}),Object(f.jsx)(O.a,{justify:"center",gutter:16,children:Object(f.jsx)(h.a,{lg:16,sm:24,children:t.filter((function(e){return e.user==a._id})).map((function(e,t){return Object(f.jsxs)(O.a,{className:"bs1 m-2 text-left",children:[Object(f.jsxs)(h.a,{lg:12,sm:24,children:[Object(f.jsx)("p",{children:Object(f.jsx)("b",{children:e.car.name})}),Object(f.jsxs)("p",{children:["Total hours :",Object(f.jsx)("b",{children:e.totalHours})]}),Object(f.jsxs)("p",{children:["rent per hour:",Object(f.jsx)("b",{children:e.car.rentPerHours})]}),Object(f.jsxs)("p",{children:["Total Amount",Object(f.jsxs)("b",{children:[":",e.totalAmount]})]})]}),Object(f.jsxs)(h.a,{lg:6,sm:24,children:[Object(f.jsxs)("p",{children:[" ","Transaction Id : ",Object(f.jsxs)("b",{children:[e.transactionId," "]})]}),Object(f.jsxs)("p",{children:[" ","From: ",Object(f.jsxs)("b",{children:[e.bookedTimeSlots.from," "]})]}),Object(f.jsxs)("p",{children:[" ","To: ",Object(f.jsxs)("b",{children:[e.bookedTimeSlots.to," "]})]}),Object(f.jsxs)("p",{children:[" ","Date of Booking:"," ",Object(f.jsxs)("b",{children:[T()(e.createdAt).format("MM/DD/YYYY")," "]})]})]}),Object(f.jsx)(h.a,{lg:4,sm:24,className:"text-right",children:Object(f.jsx)("img",{style:{borderRadius:5},src:e.car.image,height:"130",className:"p-2"})})]},t)}))})})]})};var Q=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.alertsReducer})).loading;return Object(f.jsxs)(g,{children:[t&&Object(f.jsx)(D,{}),Object(f.jsx)(O.a,{justify:"center  mt-5",children:Object(f.jsx)(h.a,{lg:12,sm:24,children:Object(f.jsxs)(H.a,{className:"bs1 p-2",layout:"vertical",onFinish:function(t){var c;t.bookedTimeSlots=[],e((c=t,function(){var e=Object(N.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.post("".concat("https://mycarst-backend.herokuapp.com","/api/cars/addcar"),c);case 4:r=e.sent,t({type:"GET_ALL_CARS",payload:r.data}),t({type:"LOADING",payload:!1}),k.b.success("New car add successfully"),setTimeout((function(){window.location.href="./admin"}),500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t({type:"LOADING",payload:!0});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())),console.log(t)},children:[Object(f.jsx)("h3",{children:"Add New Car"}),Object(f.jsx)("hr",{}),Object(f.jsx)(H.a.Item,{name:"name",label:"Car name",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"image",label:"image url",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"rentPerHour",label:"Rent per hour",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"cpacity",label:"Capacity",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"fuelType",label:"Fuel Type",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)("button",{className:"btn1",children:"ADD CAR"})})]})})})]})},X=c(443),$=c(444),ee=c(441);L.a.RangePicker;var te=function(){var e=Object(u.c)((function(e){return e.carsReducer})).cars,t=Object(u.c)((function(e){return e.alertsReducer})).loading,c=Object(r.useState)([]),a=Object(b.a)(c,2),n=a[0],s=a[1],o=Object(u.b)();return Object(r.useEffect)((function(){o(I())}),[]),Object(r.useEffect)((function(){console.log("cars data",e),s(e)}),[e]),Object(f.jsxs)(g,{children:[Object(f.jsx)(h.a,{lg:20,sm:24,children:Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)("button",{className:"btn1",children:Object(f.jsx)("a",{href:"addcar",children:"ADD CAR"})})})}),Object(f.jsx)(O.a,{justify:"center",gutter:16,className:"mt5",children:Array.isArray(n)&&n.map((function(e,t){return Object(f.jsx)(h.a,{lg:5,sm:24,xs:24,children:Object(f.jsxs)("div",{className:"car p-2 bs1 my-3",children:[Object(f.jsx)("img",{src:e.image,className:"carimg"}),Object(f.jsxs)("div",{className:"car-content d-flex align-items-center justify-content-between",children:[Object(f.jsxs)("div",{className:"text left pl-2",children:[Object(f.jsx)("p",{children:e.Name}),Object(f.jsxs)("p",{children:[" Rent Per hour",e.rentPerHour,"/- "]})]}),Object(f.jsxs)("div",{className:"mr-4",children:[Object(f.jsx)(ee.a,{title:"Are you sure to delete this car?",onConfirm:function(){var t;o((t={carid:e._id},function(){var e=Object(N.a)(v.a.mark((function e(c){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.post("".concat("https://mycarst-backend.herokuapp.com","/api/cars/deletecar"),t);case 4:r=e.sent,c({type:"GET_ALL_CARS",payload:r.data}),c({type:"LOADING",payload:!1}),k.b.success("Car deleted successfully"),setTimeout((function(){window.location.reload()}),500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),c({type:"LOADING",payload:!0});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))},okText:"Yes",cancelText:"No",children:Object(f.jsx)(X.a,{style:{color:"red",cursor:"pointer"}})}),Object(f.jsx)(i.b,{to:"/editcar/".concat(e._id),children:Object(f.jsx)($.a,{className:"mr-3",style:{color:"green",cursor:"pointer"},children:"  "})})]})]})]})},t)}))}),1==t&&Object(f.jsx)(D,{})]})};var ce=function(e){var t=Object(u.c)((function(e){return e.carsReducer})).cars,c=Object(u.b)(),a=Object(u.c)((function(e){return e.alertsReducer})).loading,n=Object(r.useState)(),s=Object(b.a)(n,2),o=s[0],i=s[1],l=Object(r.useState)([]),j=Object(b.a)(l,2),d=j[0],m=j[1];return Object(r.useEffect)((function(){var r,a,n=null===e||void 0===e||null===(r=e.match)||void 0===r||null===(a=r.params)||void 0===a?void 0:a.carid;n&&(Array.isArray(t)&&0==t.length?c(I()):(console.log(t),m(t),i(t.find((function(e){return e._id==n})))))}),[t]),console.log(o),Object(f.jsxs)(g,{children:[a&&Object(f.jsx)(D,{}),Object(f.jsx)(O.a,{justify:"center  mt-5",children:Object(f.jsx)(h.a,{lg:12,sm:24,children:d.length>0&&Object(f.jsxs)(H.a,{initialValues:o,className:"bs1 p-2",layout:"vertical",onFinish:function(e){var t;e._id=o._id,c((t=e,function(){var e=Object(N.a)(v.a.mark((function e(c){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"LOADING",payload:!0}),e.prev=1,e.next=4,w.a.post("".concat("https://mycarst-backend.herokuapp.com","/api/cars/editcar"),t);case 4:r=e.sent,c({type:"GET_ALL_CARS",payload:r.data}),c({type:"LOADING",payload:!1}),k.b.success("Car details  updated successfully"),setTimeout((function(){window.location.href="../admin"}),500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),c({type:"LOADING",payload:!0});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())),console.log(e)},children:[Object(f.jsx)("h3",{children:"Edit Car"}),o.name,t.length,Object(f.jsx)("hr",{}),Object(f.jsx)(H.a.Item,{name:"name",label:"Car name",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"image",label:"image url",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"rentPerHour",label:"Rent per hour",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"capacity",label:"Capacity",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)(H.a.Item,{name:"fuelType",label:"Fuel Type",rules:[{require:!0}],children:Object(f.jsx)(_.a,{})}),Object(f.jsx)("div",{className:"text-right",children:Object(f.jsx)("button",{className:"btn1",children:"EDIT CAR"})})]})})})]})};var re=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(i.a,{children:Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{path:"/",exact:!0,component:G}),Object(f.jsx)(l.b,{path:"/login",component:E}),Object(f.jsx)(l.b,{path:"/register",component:P}),Object(f.jsx)(ae,{path:"/userbookings/",component:Z}),Object(f.jsx)(ae,{path:"/booking/:carid",component:U}),Object(f.jsx)(ne,{path:"/editcar/:carid",component:ce}),Object(f.jsx)(ne,{path:"/admin",component:te}),Object(f.jsx)(ne,{path:"/addcar",component:Q})]})})})};function ae(e){return localStorage.getItem("user")?Object(f.jsx)(l.b,Object(o.a)({},e)):Object(f.jsx)(l.a,{to:"/Login"})}function ne(e){var t=JSON.parse(localStorage.getItem("user"));return"admin"===(null===t||void 0===t?void 0:t.role)?Object(f.jsx)(l.b,Object(o.a)({},e)):Object(f.jsx)(l.a,{to:"/"})}var se=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,445)).then((function(t){var c=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,s=t.getTTFB;c(e),r(e),a(e),n(e),s(e)}))},oe=c(113),ie=c(225),le=c(226),je={loading:!1},be={cars:[]},ue={bookings:[]},de=Object(ie.composeWithDevTools)({}),Oe=Object(oe.combineReducers)({carsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return"GET_ALL_CARS"===t.type?Object(o.a)(Object(o.a)({},e),{},{cars:t.payload}):e},alertsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;return"LOADING"===t.type?Object(o.a)(Object(o.a)({},e),{},{loading:t.payload}):e},bookingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;return"GET_ALL_BOOKINGS"===t.type?Object(o.a)(Object(o.a)({},e),{},{bookings:t.payload}):e}}),he=Object(oe.createStore)(Oe,de(Object(oe.applyMiddleware)(le.a)));s.a.render(Object(f.jsx)(u.a,{store:he,children:Object(f.jsx)(re,{})}),document.getElementById("root")),se()}},[[428,1,2]]]);
//# sourceMappingURL=main.a909aaad.chunk.js.map